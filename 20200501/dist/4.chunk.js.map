{"version":3,"sources":["webpack:///./src/views/users/userssetting/rolemanage.vue","webpack:///roleform.vue","webpack:///rolemanage.vue","webpack:///./src/views/users/roleform.vue?ba98","webpack:///./src/views/users/userssetting/styles/rolemanage.less","webpack:///./src/views/users/roleform.vue","webpack:///./src/views/users/roleform.vue?c147","webpack:///./src/views/users/userssetting/rolemanage.vue?8c6d"],"names":[],"mappings":";;;;;;AACA;AACA,uBAAgR;;AAEhR;AACA;AACA;AACA;AACA,yBAAyG;AACzG;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4DA;0BAEA;;mBAEA;2IACA;;sBAEA,uDACA,+EAGA;AALA;gBAMA;mBAEA;AAXA;AAYA;;;kCAEA;0CACA;AACA;kCACA;0CACA;AAEA;AAPA;;8CASA;yBACA;AAEA;;2DACA;sBACA;yBACA;4BACA;AAEA;;;AACA;;uDACA;2BACA;8DACA;AACA;AACA;AAEA;2EACA;2BACA;2CACA;AAEA;2EACA;2BACA;2CACA;AAEA;oEACA;oEACA;AAEA;oEACA;oEACA;AAEA;AApCA;AAvBA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DA;AACA;UAEA;;AAGA;AAFA;0BAGA;;8BAEA;kBACA;mBACA;qBACA;sBACA;mBAEA;AAPA;AAQA;;;kCAEA;0CACA;AACA;kCACA;0CACA;AAEA;AAPA;gCAQA;0BACA;aACA;aACA;AACA;;;AAIA;;;;AACA;;sBACA;;qCAEA;mDAGA;AAJA;;wDAKA;2CACA;;mCAEA;kCACA;gCACA;gEAEA;AALA;AAMA;AACA;mCACA;kCACA;iCACA;AACA;AACA;2CACA;0CACA;;;AAEA;AAEA;;AAGA;;;;AACA;;qBACA;sBACA;;qCAEA;;6BAEA;6BAGA;AAJA;AAFA;wDAOA;0CACA;;mCAEA;kCACA;gCACA;kEAEA;AALA;AAMA;AACA;8BACA,kBAEA,kCACA;uDACA;qCACA;AAEA;;AAGA;;;;AACA;;qBACA;sBACA;;qCAEA;;6BAEA;6BAGA;AAJA;AAFA;wDAOA;2CACA;;mCAEA;kCACA;gCACA;kEAGA;AANA;;AAOA;AACA;8BACA,kBAEA,kCACA;uDACA;;;AACA;AAEA;;AAGA;;;mDACA;2BACA;iBACA;AAEA;;AAGA;;;sDACA;gCACA;oCACA;AACA;AAEA;;AAGA;;;oCACA;kDACA;6BACA;yBACA;6BACA;AAEA;;AAGA;;;qDACA;sDACA;;+BAEA;8BACA;0BACA;qCAEA;AALA;AAMA;AACA;+BACA;oJAEA;;4BACA;mBACA;oCACA;;iCACA;uDACA;mFACA;AAEA;;wFACA;qEACA;wFACA;qEAEA;;6FACA;4BACA;AACA;8CACA;iEACA;AAEA;;AAGA;;;;AACA;;yBACA;qCACA;yEACA;4CACA;yEACA;mBACA;wEACA;wEACA;gFACA;AACA;+BACA;0BACA;;uCAEA;;mCAEA;yCACA;gCACA;iGAGA;AANA;AAFA;mBASA;0BACA;;uCAEA;;iCAEA;mCACA;yCACA;gCACA;iGAGA;AAPA;AAFA;AAUA;wDACA;2CACA;;mCAEA;kCACA;gCACA;kEAEA;AALA;AAMA;AACA;;+BAEA;8BACA;4BACA;yCAEA;AALA;uBAMA;oDACA;oCACA;;+BAEA;8BACA;4BACA;yCAEA;AALA;AAMA;AACA;AAEA;;;AAGA;;;;AACA;;AACA;6BACA;;+BAEA;8BACA;4BACA;uCAEA;AALA;AAMA;AACA;;2CAEA;0CACA;sBACA;mCACA;AAJA,gCAKA;gCACA;0BACA;;2CAEA;oCAEA;AAHA;8DAIA;8CACA;;uCAEA;sCACA;oCACA;sEAEA;AALA;AAMA;AAEA;;;mCAEA;kCACA;8BACA;2CAEA;AALA;2BAMA;wCACA;;mCAEA;kCACA;8BACA;2CAEA;AALA;AAMA;iCAEA,CACA;AAEA;;gGACA;wBACA;mDACA;2BACA;gCACA;4BACA;2BACA;AACA;mBACA;AAEA;;oFACA;wBACA;qDACA;2BACA;0BACA;4BACA;2BACA;AACA;mBACA;AAEA;;8DACA;qBACA;yDACA;sCACA;AACA;kDACA;AAGA;AAxTA;;AA5BA,G;;;;;;;ACpCA,yC;;;;;;;ACAA,yC;;;;;;;;ACCA;AACA,uBAAyQ;;AAEzQ;AACA;AACA;AACA;AACA,yBAAsG;AACtG;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;AC/BA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACnNA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"4.chunk.js","sourcesContent":["\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?minimize!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-90d7287a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!autoprefixer-loader!less-loader!./styles/rolemanage.less\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rolemanage.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-90d7287a\\\"}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./rolemanage.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"G:\\\\云拼接\\\\客户端\\\\web1.1\\\\wallweb\\\\view_el\\\\src\\\\views\\\\users\\\\userssetting\\\\rolemanage.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] rolemanage.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-90d7287a\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-90d7287a\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/userssetting/rolemanage.vue\n// module id = 406\n// module chunks = 4","<style lang=\"less\" scoped>\r\n    .radio-block{\r\n        display: block;\r\n        margin-left: 0px!important;\r\n        margin-top: 5px;\r\n    }\r\n    .option{\r\n        max-width: 220px;\r\n        padding-right: 40px;\r\n    }\r\n</style>\r\n<template>\r\n    <div class=\"roleform\">\r\n        <el-dialog\r\n            :title=\"$t(title)\"\r\n            :visible.sync=\"modal\"\r\n            :close-on-click-modal=\"false\"\r\n            size=\"small\"\r\n            >\r\n            <el-form ref=\"role_form\" :model=\"formItem\" :rules=\"formRules\" label-width=\"100px\" label-position=\"left\">\r\n                <el-form-item :label=\"$t('角色名')\" prop=\"Name\">\r\n                    <el-input v-model=\"formItem.Name\" :placeholder=\"$t('请输入')\"></el-input>\r\n                </el-form-item>\r\n                <hr />\r\n                <el-form-item :label=\"$t('所有权限')\">\r\n                    <el-radio-group v-model=\"formItem.ScreenStatus_1\" @change=\"handleScreenStatus1Change\">\r\n                        <el-radio :label=\"1\">{{$t('所有屏组')}}</el-radio>\r\n                        <el-radio :label=\"0\">{{$t('部分屏组')}}</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('屏组列表')\">\r\n                    <el-select v-model=\"formItem.ScreenID_1\" :disabled=\"!!formItem.ScreenStatus_1 || !!formItem.ScreenStatus_2\" multiple  filterable :placeholder=\"$t('请选择')\">\r\n                        <el-option\r\n                          class=\"option\" \r\n                          v-for=\"(item, $index) in screen\"\r\n                          :key=\"$index\"\r\n                          :disabled=\"checkExistedInScreen2(item)\"\r\n                          :label=\"item.Name\"\r\n                          :value=\"item.ID\"\r\n                          >\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <hr />\r\n                <el-form-item :label=\"$t('使用权限')\">\r\n                    <el-radio-group v-model=\"formItem.ScreenStatus_2\" @change=\"handleScreenStatus2Change\">\r\n                        <el-radio :label=\"1\">{{$t('所有屏组')}}</el-radio>\r\n                        <el-radio :label=\"0\">{{$t('部分屏组')}}</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('屏组列表')\">\r\n                    <el-select v-model=\"formItem.ScreenID_2\" :disabled=\"!!formItem.ScreenStatus_1 || !!formItem.ScreenStatus_2\" multiple  filterable :placeholder=\"$t('请选择')\">\r\n                        <el-option\r\n                          class=\"option\" \r\n                          v-for=\"(item, $index) in screen\"\r\n                          :disabled=\"checkExistedInScreen1(item)\"\r\n                          :key=\"$index\"\r\n                          :label=\"item.Name\"\r\n                          :value=\"item.ID\"\r\n                          >\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <hr />\r\n                <el-form-item :label=\"$t('选择信号')\">\r\n                    <el-radio-group v-model=\"formItem.signalStatus\">\r\n                        <el-radio :label=\"1\">{{$t('所有信号')}}</el-radio>\r\n                        <el-radio :label=\"0\">{{$t('部分信号')}}</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('信号源')\">\r\n                    <el-select v-model=\"formItem.SourceID\" :disabled=\"!!formItem.signalStatus\" multiple  filterable :placeholder=\"$t('请选择')\">\r\n                        <el-option\r\n                          class=\"option\"  \r\n                          v-for=\"(item, $index) in signal\"\r\n                          :key=\"$index\"\r\n                          :label=\"item.Name\"\r\n                          :value=\"item.ID\"\r\n                          >\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>              \r\n                <el-form-item>\r\n                    <el-button @click=\"modal = false\">{{$t('取消')}}</el-button>\r\n                    <el-button type=\"primary\" @click=\"handleSubmit('role_form')\">{{$t('保存')}}</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data () {\r\n            return {\r\n                modal:false,\r\n                formItem: { ID: '', Name: '', ScreenStatus_1: 0, ScreenID_1: [], ScreenStatus_2: 0, ScreenID_2: [], signalStatus: 1, SourceID: []},\r\n                formRules: {\r\n                    Name: [\r\n                        {required: true, message: this.$t('请填写名称'), trigger: 'blur'},\r\n                        { type: 'string',  max: 12, message: this.$t('名称长度不能超过12位'), trigger: 'blur' }\r\n                    ],\r\n                },\r\n                op: 'add',\r\n                title: '新建',\r\n            }\r\n        },\r\n        computed: {\r\n            screen: function() {\r\n                return this.$store.state.role.screen\r\n            },\r\n            signal: function() {\r\n                return this.$store.state.role.signal\r\n            }\r\n        },\r\n        methods: {\r\n            _setmodal: function(status) {\r\n                this.modal = status\r\n            },\r\n\r\n            setFormData: function (data, title, op) {\r\n                this.op = op\r\n                this.title = title\r\n                this.formItem = data\r\n            },\r\n\r\n            handleSubmit (name) {\r\n                this.$refs[name].validate((valid) => {\r\n                    if (valid) { \r\n                        this.$emit('formsubmit', this.op, this.formItem)\r\n                    }\r\n                })\r\n            },\r\n\r\n            handleScreenStatus1Change(val){\r\n                if(val === 0) return\r\n                this.formItem.ScreenStatus_2 = 0\r\n            },\r\n\r\n            handleScreenStatus2Change(val){\r\n                if(val === 0) return\r\n                this.formItem.ScreenStatus_1 = 0\r\n            },\r\n\r\n            checkExistedInScreen2(item) {\r\n                return !(this.formItem.ScreenID_2.indexOf(item.ID) === -1)\r\n            },\r\n\r\n            checkExistedInScreen1(item) {\r\n                return !(this.formItem.ScreenID_1.indexOf(item.ID) === -1)\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// roleform.vue?6f50ba70","<style lang=\"less\" src='./styles/rolemanage.less'></style>\r\n<template>\r\n    <div class=\"rolemanage\">\r\n        <el-row >\r\n            <el-col :span=\"24\">\r\n            <div class=\"tabletools\">\r\n                <el-button class=\"table-btn\" @click=\"refresh\"><i class=\"fa fa-refresh mar-rig\"></i>{{$t('刷新')}}</el-button>\r\n                <el-button class=\"table-btn\" @click=\"openRoleForm($event, 'add')\"><i class=\"el-icon-plus mar-rig\"></i>{{$t('新建')}}</el-button>\r\n                <el-button class=\"table-btn\" @click=\"openRoleForm($event, 'edit')\"><i class=\"el-icon-edit mar-rig\"></i>{{$t('编辑')}}</el-button>\r\n                <el-button class=\"table-btn\" @click=\"handleDel\"><i class=\"el-icon-delete mar-rig\"></i>{{$t('删除')}}</el-button>\r\n            </div>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row style=\"height: calc(100% - 50px)\">\r\n            <el-col :span=\"24\">\r\n            <div class=\"tableshow\">\r\n                <el-table highlight-current-row :data=\"data\" @current-change=\"curChange\">\r\n                    <el-table-column property=\"Name\" :label=\"$t('角色名')\" align=\"center\"></el-table-column>\r\n                </el-table>\r\n            </div>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row>\r\n            <el-col :span=\"24\">\r\n            <div class=\"footpages\">\r\n                <el-pagination :total=\"total\" :current=\"current\" :page-size=\"pagesize\" show-elevator show-total\r\n                      @on-change=\"onPageChange\"></el-pagination>\r\n            </div>\r\n            </el-col>\r\n        </el-row>\r\n        <RoleForm ref=\"role_form\" @formsubmit=\"handleForm\" />\r\n    </div>\r\n</template>\r\n<script>\r\n    import RoleForm from '../roleform.vue';\r\n    export default {\r\n        name:'rolemanage',\r\n        components : {\r\n            RoleForm\r\n        },\r\n        data () {\r\n            return {\r\n                delTitle: this.$t('删除'),\r\n                data: [],\r\n                total: 0,\r\n                current: 1,\r\n                pagesize: 10,\r\n                curId: null\r\n            }\r\n        },\r\n        computed: {\r\n            screen: function() {\r\n                return this.$store.state.role.screen\r\n            },\r\n            signal: function() {\r\n                return this.$store.state.role.signal\r\n            }\r\n        },\r\n        created() {\r\n            this.list(0, this.pagesize)\r\n            this.getScreenList()\r\n            this.getSource()\r\n        },\r\n        methods: {\r\n            /**\r\n             * 获取角色列表\r\n             */\r\n            list: function (start, limit) {\r\n                var url = '/api.v2.do.role.get',\r\n                params = {\r\n                    \"userid\": this.$auth.getuid(),\r\n                    \"page\": {\"start\": start, \"limit\": limit}\r\n                }\r\n\r\n                this.$http(url, params).then((res) => {\r\n                    if (res.data.status !== 0) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            'type': 'warning',\r\n                            'message': this.$t(this.$msg[res.data.status])\r\n                        })\r\n                        return\r\n                    }\r\n                    if (!res.data.msg) {\r\n                        this.total = 0\r\n                        this.data = []\r\n                        return\r\n                    }\r\n                    this.total = res.data.msg.count\r\n                    this.data = res.data.msg.body \r\n                }).catch((err) => { console.log(err) })\r\n\r\n            },\r\n\r\n            /**\r\n             * 获取屏组列表数据\r\n             */\r\n            getScreenList: function () {\r\n                var vm = this\r\n                var url = '/api.v2.do.screen.get'\r\n                var params = {\r\n                    \"userid\": this.$auth.getuid(),\r\n                    \"page\": {\r\n                        \"start\": 0,\r\n                        \"limit\": 0\r\n                    }\r\n                }\r\n                this.$http(url, params).then((res) => {\r\n                    if (res.data.status != 0) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            'type': 'warning',\r\n                            'message': this.$t(this.$msg[res.data.status])\r\n                        })\r\n                        return\r\n                    }\r\n                    if (!res.data.msg)\r\n                        var screen = []\r\n                    else\r\n                        var screen = res.data.msg.body\r\n                    this.$store.commit('role/setScreen', screen)\r\n                }).catch((err) => {})\r\n            },\r\n\r\n            /**\r\n             * 获取信源分组信息\r\n             */\r\n            getSource: function() {\r\n                var vm = this\r\n                var url = '/api.v2.do.source.get'\r\n                var params = {\r\n                    \"userid\": this.$auth.getuid(),\r\n                    \"page\": {\r\n                        \"start\": 0,\r\n                        \"limit\": 0\r\n                    }\r\n                }\r\n                this.$http(url, params).then((res) => {\r\n                    if (res.data.status !== 0) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            'type': 'warning',\r\n                            'message': this.$t(this.$msg[res.data.status])\r\n                        })\r\n                        \r\n                        return    \r\n                    }\r\n                    if(!res.data.msg) \r\n                        var signal = []\r\n                    else \r\n                        var signal = res.data.msg.body\r\n                    this.$store.commit('role/setSignal', signal)\r\n                }).catch((err) => { console.log(err) }) \r\n            },\r\n\r\n           /**\r\n             * 切换页面查看数据\r\n             */\r\n            onPageChange: function (index) {\r\n                this.current = index\r\n                this.refresh()\r\n            },\r\n\r\n            /**\r\n             * 当前行发生变化时触发\r\n             */\r\n            curChange: function (newVal, oldVal) {               \r\n                if (null != newVal) {\r\n                    this.curId = newVal.ID\r\n                }\r\n            },\r\n              \r\n            /**\r\n             * 刷新页面\r\n             */\r\n            refresh: function() {\r\n                var start = (this.current -1 ) * this.pagesize ,\r\n                    limit = this.pagesize\r\n                this.curId = null\r\n                this.list(start, limit )\r\n            },\r\n\r\n            /**\r\n             * 打开新建(编辑)角色的窗口\r\n             */\r\n            openRoleForm: function(e, type) {\r\n                if (type == 'edit' && this.curId == null) {\r\n                    this.$message({\r\n                       showClose: true,\r\n                       duration: 1500,\r\n                       type: 'warning',\r\n                       message: this.$t('请先选择要编辑的角色')\r\n                    })\r\n                    return\r\n                }\r\n                if (type == 'add') {\r\n                    var formData = { ID: '', Name: '', ScreenStatus_1: 0, ScreenID_1: [], ScreenStatus_2: 0, ScreenID_2: [], signalStatus: 1, SourceID: []}\r\n\r\n                    var title = '新建'\r\n                } else {                  \r\n                    var formData = this.getCurrentSelectRole()\r\n                    var ScreenID_1 = [], ScreenID_2 = []\r\n                    formData.Screen.forEach((val)=>{\r\n                        val.Attr === 0 ? ScreenID_1.push(val.ID) : ScreenID_2.push(val.ID)\r\n                    })\r\n\r\n                    formData.ScreenStatus_1 = (ScreenID_1.length == this.screen.length) ? 1 : 0\r\n                    formData.ScreenID_1 = formData.ScreenStatus_1 ? [] : ScreenID_1\r\n                    formData.ScreenStatus_2 = (ScreenID_2.length == this.screen.length) ? 1 : 0\r\n                    formData.ScreenID_2 = formData.ScreenStatus_2 ? [] : ScreenID_2\r\n\r\n                    formData.signalStatus = (formData.SourceID.length == this.signal.length) ? 1 : 0\r\n                    var title = '编辑'\r\n                }               \r\n                this.$refs['role_form']._setmodal(true)\r\n                this.$refs['role_form'].setFormData(formData, title, type)\r\n            },\r\n\r\n            /**\r\n             * 新建或者编辑处理\r\n             */\r\n            handleForm(type, data) {\r\n                var screen = null \r\n                if(data.ScreenStatus_1) {\r\n                    screen = this.filterScreenDataFromAllByAtrr(this.screen, 0)\r\n                } else if(data.ScreenStatus_2) {\r\n                    screen = this.filterScreenDataFromAllByAtrr(this.screen, 1)\r\n                } else {\r\n                    let arr1 = this.filterScreenDataByAtrr(data.ScreenID_1, 0)\r\n                    let arr2 = this.filterScreenDataByAtrr(data.ScreenID_2, 1)\r\n                    screen = [...arr1, ...arr2]\r\n                }\r\n                if (type == 'add') {\r\n                    var url = '/api.v2.do.role.add'\r\n                    var params = {\r\n                        userid: this.$auth.getuid(),\r\n                        body: {\r\n                            Name: data.Name,\r\n                            ScreenAttr: data.ScreenAttr,\r\n                            Screen: screen,\r\n                            SourceID: data.signalStatus ?  this.$lodash.map(this.signal, 'ID') : data.SourceID,\r\n                        }\r\n                    }\r\n                } else {\r\n                    var url = '/api.v2.do.role.edit'\r\n                    var params = {\r\n                        userid: this.$auth.getuid(),\r\n                        body: {\r\n                            ID: data.ID,\r\n                            Name: data.Name,\r\n                            ScreenAttr: data.ScreenAttr,\r\n                            Screen: screen,\r\n                            SourceID: data.signalStatus ?  this.$lodash.map(this.signal, 'ID') : data.SourceID,\r\n                        }\r\n                    }\r\n                }\r\n                this.$http(url, params).then((res) => {\r\n                    if(0 !== res.data.status) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            'type': 'warning',\r\n                            'message': this.$t(this.$msg[res.data.status])\r\n                        })\r\n                        return\r\n                    }\r\n                    this.$message({\r\n                        showClose: true,\r\n                        duration: 1500,\r\n                        'type': 'success',\r\n                        'message': this.$t('操作成功')\r\n                    })\r\n                    this.refresh()\r\n                    this.$refs['role_form']._setmodal(false)\r\n                }).catch((err) => {\r\n                    this.$message({\r\n                        showClose: true,\r\n                        duration: 1500,\r\n                        'type': 'error',\r\n                        'message': this.$t('操作失败')\r\n                    })\r\n                    return\r\n                })\r\n            },\r\n\r\n            /**\r\n             * 删除角色\r\n             */\r\n            handleDel: function () {\r\n                //此处处理删除操作\r\n                if(!this.curId) {\r\n                    this.$message({\r\n                        showClose: true,\r\n                        duration: 1500,\r\n                        'type': 'error',\r\n                        'message': this.$t('请先选择需要删除的角色')\r\n                    })\r\n                    return\r\n                }\r\n                this.$confirm(this.$t('此操作将永久删除该角色, 是否继续?'), this.$t('提示'), {\r\n                    confirmButtonText: this.$t('确定'),\r\n                    cancelButtonText: this.$t('取消'),\r\n                    type: 'warning',\r\n                    closeOnClickModal: false\r\n                }).then(() => {\r\n                    var id = this.curId,\r\n                        url = '/api.v2.do.role.del',\r\n                        params = {\r\n                            \"userid\": this.$auth.getuid(), \r\n                            \"body\":{\"ID\": id } \r\n                        }\r\n                    this.$http(url, params).then((res) => {\r\n                        if(res.data.status != 0) {\r\n                            this.$message({\r\n                                showClose: true,\r\n                                duration: 1500,\r\n                                'type': 'warning',\r\n                                'message': this.$t(this.$msg[res.data.status])\r\n                            })\r\n                            return\r\n                        }\r\n\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            type: 'success',\r\n                            message: this.$t('删除成功')\r\n                        });\r\n                        this.refresh()\r\n                    }).catch((err) => {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            duration: 1500,\r\n                            type: 'warning',\r\n                            message: this.$t('删除失败')\r\n                        });\r\n                    })    \r\n                }).catch(() => {\r\n                    \r\n                });\r\n            },\r\n\r\n            filterScreenDataFromAllByAtrr: function(screenList, attr) {\r\n                var items = []\r\n                screenList.map((value, index) => {\r\n                    var item = {}\r\n                    item.ID = value.ID\r\n                    item.Attr = attr\r\n                    items.push(item)\r\n                })\r\n                return items\r\n            },\r\n\r\n            filterScreenDataByAtrr: function(screenIDList, attr) {\r\n                var items = []\r\n                screenIDList.map((value, index) => {\r\n                    var item = {}\r\n                    item.ID = value\r\n                    item.Attr = attr\r\n                    items.push(item)\r\n                })\r\n                return items\r\n            },\r\n\r\n            getCurrentSelectRole: function() {\r\n                var vm = this\r\n                var data = this.data.filter(function(value){\r\n                    return value.ID == vm.curId\r\n                })\r\n                return JSON.parse(JSON.stringify(data[0]))\r\n            }\r\n        },\r\n\r\n    }      \r\n    \r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// rolemanage.vue?160739da","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-6e089b49\",\"scoped\":true,\"hasInlineConfig\":false}!./~/autoprefixer-loader!./~/less-loader!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/users/roleform.vue\n// module id = 867\n// module chunks = 4","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-90d7287a\",\"scoped\":false,\"hasInlineConfig\":false}!./~/autoprefixer-loader!./~/less-loader!./src/views/users/userssetting/styles/rolemanage.less\n// module id = 872\n// module chunks = 4","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-6e089b49\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!autoprefixer-loader!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleform.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleform.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e089b49\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleform.vue\"),\n  /* scopeId */\n  \"data-v-6e089b49\",\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"G:\\\\云拼接\\\\客户端\\\\web1.1\\\\wallweb\\\\view_el\\\\src\\\\views\\\\users\\\\roleform.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] roleform.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-6e089b49\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-6e089b49\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/roleform.vue\n// module id = 882\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"roleform\"\n  }, [_c('el-dialog', {\n    attrs: {\n      \"title\": _vm.$t(_vm.title),\n      \"visible\": _vm.modal,\n      \"close-on-click-modal\": false,\n      \"size\": \"small\"\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.modal = $event\n      }\n    }\n  }, [_c('el-form', {\n    ref: \"role_form\",\n    attrs: {\n      \"model\": _vm.formItem,\n      \"rules\": _vm.formRules,\n      \"label-width\": \"100px\",\n      \"label-position\": \"left\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('角色名'),\n      \"prop\": \"Name\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": _vm.$t('请输入')\n    },\n    model: {\n      value: (_vm.formItem.Name),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"Name\", $$v)\n      },\n      expression: \"formItem.Name\"\n    }\n  })], 1), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('所有权限')\n    }\n  }, [_c('el-radio-group', {\n    on: {\n      \"change\": _vm.handleScreenStatus1Change\n    },\n    model: {\n      value: (_vm.formItem.ScreenStatus_1),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"ScreenStatus_1\", $$v)\n      },\n      expression: \"formItem.ScreenStatus_1\"\n    }\n  }, [_c('el-radio', {\n    attrs: {\n      \"label\": 1\n    }\n  }, [_vm._v(_vm._s(_vm.$t('所有屏组')))]), _vm._v(\" \"), _c('el-radio', {\n    attrs: {\n      \"label\": 0\n    }\n  }, [_vm._v(_vm._s(_vm.$t('部分屏组')))])], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('屏组列表')\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"disabled\": !!_vm.formItem.ScreenStatus_1 || !!_vm.formItem.ScreenStatus_2,\n      \"multiple\": \"\",\n      \"filterable\": \"\",\n      \"placeholder\": _vm.$t('请选择')\n    },\n    model: {\n      value: (_vm.formItem.ScreenID_1),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"ScreenID_1\", $$v)\n      },\n      expression: \"formItem.ScreenID_1\"\n    }\n  }, _vm._l((_vm.screen), function(item, $index) {\n    return _c('el-option', {\n      key: $index,\n      staticClass: \"option\",\n      attrs: {\n        \"disabled\": _vm.checkExistedInScreen2(item),\n        \"label\": item.Name,\n        \"value\": item.ID\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('使用权限')\n    }\n  }, [_c('el-radio-group', {\n    on: {\n      \"change\": _vm.handleScreenStatus2Change\n    },\n    model: {\n      value: (_vm.formItem.ScreenStatus_2),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"ScreenStatus_2\", $$v)\n      },\n      expression: \"formItem.ScreenStatus_2\"\n    }\n  }, [_c('el-radio', {\n    attrs: {\n      \"label\": 1\n    }\n  }, [_vm._v(_vm._s(_vm.$t('所有屏组')))]), _vm._v(\" \"), _c('el-radio', {\n    attrs: {\n      \"label\": 0\n    }\n  }, [_vm._v(_vm._s(_vm.$t('部分屏组')))])], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('屏组列表')\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"disabled\": !!_vm.formItem.ScreenStatus_1 || !!_vm.formItem.ScreenStatus_2,\n      \"multiple\": \"\",\n      \"filterable\": \"\",\n      \"placeholder\": _vm.$t('请选择')\n    },\n    model: {\n      value: (_vm.formItem.ScreenID_2),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"ScreenID_2\", $$v)\n      },\n      expression: \"formItem.ScreenID_2\"\n    }\n  }, _vm._l((_vm.screen), function(item, $index) {\n    return _c('el-option', {\n      key: $index,\n      staticClass: \"option\",\n      attrs: {\n        \"disabled\": _vm.checkExistedInScreen1(item),\n        \"label\": item.Name,\n        \"value\": item.ID\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('选择信号')\n    }\n  }, [_c('el-radio-group', {\n    model: {\n      value: (_vm.formItem.signalStatus),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"signalStatus\", $$v)\n      },\n      expression: \"formItem.signalStatus\"\n    }\n  }, [_c('el-radio', {\n    attrs: {\n      \"label\": 1\n    }\n  }, [_vm._v(_vm._s(_vm.$t('所有信号')))]), _vm._v(\" \"), _c('el-radio', {\n    attrs: {\n      \"label\": 0\n    }\n  }, [_vm._v(_vm._s(_vm.$t('部分信号')))])], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": _vm.$t('信号源')\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"disabled\": !!_vm.formItem.signalStatus,\n      \"multiple\": \"\",\n      \"filterable\": \"\",\n      \"placeholder\": _vm.$t('请选择')\n    },\n    model: {\n      value: (_vm.formItem.SourceID),\n      callback: function($$v) {\n        _vm.$set(_vm.formItem, \"SourceID\", $$v)\n      },\n      expression: \"formItem.SourceID\"\n    }\n  }, _vm._l((_vm.signal), function(item, $index) {\n    return _c('el-option', {\n      key: $index,\n      staticClass: \"option\",\n      attrs: {\n        \"label\": item.Name,\n        \"value\": item.ID\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.modal = false\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('取消')))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleSubmit('role_form')\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.$t('保存')))])], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-6e089b49\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e089b49\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/users/roleform.vue\n// module id = 900\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"rolemanage\"\n  }, [_c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('div', {\n    staticClass: \"tabletools\"\n  }, [_c('el-button', {\n    staticClass: \"table-btn\",\n    on: {\n      \"click\": _vm.refresh\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-refresh mar-rig\"\n  }), _vm._v(_vm._s(_vm.$t('刷新')))]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"table-btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.openRoleForm($event, 'add')\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-plus mar-rig\"\n  }), _vm._v(_vm._s(_vm.$t('新建')))]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"table-btn\",\n    on: {\n      \"click\": function($event) {\n        _vm.openRoleForm($event, 'edit')\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-edit mar-rig\"\n  }), _vm._v(_vm._s(_vm.$t('编辑')))]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"table-btn\",\n    on: {\n      \"click\": _vm.handleDel\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-delete mar-rig\"\n  }), _vm._v(_vm._s(_vm.$t('删除')))])], 1)])], 1), _vm._v(\" \"), _c('el-row', {\n    staticStyle: {\n      \"height\": \"calc(100% - 50px)\"\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('div', {\n    staticClass: \"tableshow\"\n  }, [_c('el-table', {\n    attrs: {\n      \"highlight-current-row\": \"\",\n      \"data\": _vm.data\n    },\n    on: {\n      \"current-change\": _vm.curChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"property\": \"Name\",\n      \"label\": _vm.$t('角色名'),\n      \"align\": \"center\"\n    }\n  })], 1)], 1)])], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('div', {\n    staticClass: \"footpages\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"total\": _vm.total,\n      \"current\": _vm.current,\n      \"page-size\": _vm.pagesize,\n      \"show-elevator\": \"\",\n      \"show-total\": \"\"\n    },\n    on: {\n      \"on-change\": _vm.onPageChange\n    }\n  })], 1)])], 1), _vm._v(\" \"), _c('RoleForm', {\n    ref: \"role_form\",\n    on: {\n      \"formsubmit\": _vm.handleForm\n    }\n  })], 1)\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-90d7287a\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-90d7287a\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/users/userssetting/rolemanage.vue\n// module id = 906\n// module chunks = 4"],"sourceRoot":""}